<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>D贸lares</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_observablehq/theme-air,near-midnight.css">
<link rel="preload" as="style" href="./_observablehq/stdlib/inputs.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_observablehq/theme-air,near-midnight.css">
<link rel="stylesheet" type="text/css" href="./_observablehq/stdlib/inputs.css">
<link rel="modulepreload" href="./_observablehq/client.js">
<link rel="modulepreload" href="./_observablehq/runtime.js">
<link rel="modulepreload" href="./_observablehq/stdlib.js">
<link rel="modulepreload" href="./_import/components/plot.ab02ccfd.js">
<link rel="modulepreload" href="./_npm/@observablehq/plot@0.6.17/_esm.js">
<link rel="modulepreload" href="./_npm/htl@0.3.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3@7.9.0/_esm.js">
<link rel="modulepreload" href="./_observablehq/stdlib/inputs.js">
<link rel="modulepreload" href="./_npm/isoformat@0.2.1/_esm.js">
<link rel="modulepreload" href="./_npm/interval-tree-1d@1.0.4/_esm.js">
<link rel="modulepreload" href="./_npm/d3-array@3.2.4/_esm.js">
<link rel="modulepreload" href="./_npm/d3-axis@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-brush@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-chord@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-color@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-contour@4.0.2/_esm.js">
<link rel="modulepreload" href="./_npm/d3-delaunay@6.0.4/_esm.js">
<link rel="modulepreload" href="./_npm/d3-dispatch@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-drag@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-dsv@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-ease@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-fetch@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-force@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-format@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-geo@3.1.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-hierarchy@3.1.2/_esm.js">
<link rel="modulepreload" href="./_npm/d3-interpolate@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-path@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-polygon@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-quadtree@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-random@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-scale@4.0.2/_esm.js">
<link rel="modulepreload" href="./_npm/d3-scale-chromatic@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-selection@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-shape@3.2.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-time@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-time-format@4.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-timer@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-transition@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-zoom@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/binary-search-bounds@2.0.5/_esm.js">
<link rel="modulepreload" href="./_npm/internmap@2.0.3/_esm.js">
<link rel="modulepreload" href="./_npm/delaunator@5.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/robust-predicates@3.0.2/_esm.js">
<link rel="icon" href="https://mauforonda.github.io/images/icon.svg" type="image/png">
<script type="module">

import {define} from "./_observablehq/client.js";

define({id: "0e160895", inputs: ["localStorage","Inputs","Generators"], outputs: ["drawPlot","displayObservation","default_cotizacion","stored_cotizacion","selected_cotizacion","input_cotizacion","tipo_cotizacion"], body: async (localStorage,Inputs,Generators) => {
const {drawPlot, displayObservation} = await import("./_import/components/plot.ab02ccfd.js");

const default_cotizacion = "vwap";
const stored_cotizacion = localStorage.getItem("tipo-cotizacion");
const selected_cotizacion = stored_cotizacion
  ? stored_cotizacion
  : default_cotizacion;

const input_cotizacion = Inputs.input(selected_cotizacion);
const tipo_cotizacion = Generators.input(input_cotizacion);
return {drawPlot,displayObservation,default_cotizacion,stored_cotizacion,selected_cotizacion,input_cotizacion,tipo_cotizacion};
}});

define({id: "d80fe801", inputs: ["localStorage"], outputs: ["default_time","stored_time","selected_time"], body: (localStorage) => {
const default_time = "30";
const stored_time = localStorage.getItem("timerange");
const selected_time = stored_time ? stored_time : default_time;
return {default_time,stored_time,selected_time};
}});

define({id: "ef4e770f", inputs: ["Inputs","Generators"], outputs: ["tradeTypes","tradeType","officialRates","texto_cotizaciones"], body: (Inputs,Generators) => {
const tradeTypes = Inputs.radio(["buy", "sell"], {
  format: (d) => (d == "buy" ? "compra" : "venta"),
  value: "buy",
});
const tradeType = Generators.input(tradeTypes);
const officialRates = {
  buy: 6.86,
  sell: 6.96,
};

const texto_cotizaciones = (cotizacion) => {
  const opciones = {
    median: "mediana de todos los precios listados",
    vwap: "promedio ponderado por volumen",
    naive: `valor m谩s frecuente en el 10% de ofertas m谩s bajo (compra) o alto (venta)`,
  };
  return opciones[cotizacion];
};
return {tradeTypes,tradeType,officialRates,texto_cotizaciones};
}});

define({id: "4f0781b7", inputs: ["d3","tradeType"], outputs: ["github","oficial","oficialMap","data"], body: async (d3,tradeType) => {
const github = "https://raw.githubusercontent.com/mauforonda/dolares/main";

const oficial = await d3.csv(`${github}/${tradeType}_oficial.csv`, (d) => ({
  timestamp: new Date(d.timestamp + "T00:00-04:00"),
  value: +d.value,
}));

const oficialMap = new Map(
  oficial.map((o) => [o.timestamp.toISOString().slice(0, 10), o.value])
);

let data = await d3.csv(`${github}/${tradeType}.csv`, d3.autoType);

data = data.map((d) => ({
  ...d,
  date: d.timestamp.toISOString().slice(0, 10),
}));
return {github,oficial,oficialMap,data};
}});

define({id: "372b552c", inputs: ["data","Inputs","selected_time","Generators"], outputs: ["total_days","opcionesDias","timeRanges","timeRange"], body: (data,Inputs,selected_time,Generators) => {
const total_days = new Set(
  data.map((d) => {
    const t = new Date(d.timestamp.getTime() - 4 * 3600e3);
    return t.toISOString().slice(0, 10);
  })
).size;
const opcionesDias = {
  [total_days]: "todo",
  90: "3 meses",
  30: "1 mes",
  7: "1 semana",
  3: "3 d铆as",
};
const timeRanges = Inputs.radio(Object.keys(opcionesDias), {
  format: (d) => opcionesDias[d],
  sort: (a, b) => {
    return Number(b) - Number(a);
  },
  value: selected_time,
});
const timeRange = Generators.input(timeRanges);
return {total_days,opcionesDias,timeRanges,timeRange};
}});

define({id: "b0ab47b8", inputs: ["localStorage","timeRange"], body: (localStorage,timeRange) => {
localStorage.setItem("timerange", timeRange);
}});

define({id: "4bf85c01", inputs: ["timeRange"], body: (timeRange) => {
console.log(timeRange);
}});

define({id: "eecc0d5c", inputs: ["Generators"], outputs: ["dark"], body: (Generators) => {
const dark = Generators.dark();
return {dark};
}});

define({id: "77b3e1c9", inputs: ["drawPlot","data","oficial","width","tipo_cotizacion","timeRange","dark","Generators"], outputs: ["plot","observation"], body: (drawPlot,data,oficial,width,tipo_cotizacion,timeRange,dark,Generators) => {
const plot = drawPlot(data, oficial, width, tipo_cotizacion, timeRange, dark);
const observation = Generators.input(plot);
return {plot,observation};
}});

define({id: "492db887", inputs: ["observation","data","displayObservation","tipo_cotizacion","oficialMap"], outputs: ["selected","plotHeader"], body: (observation,data,displayObservation,tipo_cotizacion,oficialMap) => {
const selected = observation ? observation : data.slice(-1)[0];
const plotHeader = displayObservation(
  selected,
  tipo_cotizacion,
  oficialMap.get(selected.date)
);
return {selected,plotHeader};
}});

define({id: "6842829b", inputs: ["Inputs","htl","Generators"], outputs: ["bolivianosInitiate","bolivianosInput","bolivianos"], body: (Inputs,htl,Generators) => {
const bolivianosInitiate = Inputs.input(100);
const bolivianosInput = Inputs.bind(
  htl.html`<input type=number style="width: 80px;">`,
  bolivianosInitiate
);
const bolivianos = Generators.input(bolivianosInput);
return {bolivianosInitiate,bolivianosInput,bolivianos};
}});

define({id: "d81136b0", inputs: ["Event","texto_cotizaciones","htl","selected_cotizacion","input_cotizacion","localStorage"], outputs: ["set","cambio_cotizacion"], body: (Event,texto_cotizaciones,htl,selected_cotizacion,input_cotizacion,localStorage) => {
function set(input, value) {
  input.value = value;
  input.dispatchEvent(new Event("input", { bubbles: true }));
}

function cambio_cotizacion(cotizacion) {
  const texto = texto_cotizaciones(cotizacion);
  const input_button = htl.html`<span class="cotizacion">${texto}</span>`;
  if (cotizacion == selected_cotizacion) {
    input_button.classList.add("selected");
  }
  input_button.onclick = () => {
    set(input_cotizacion, cotizacion);
    localStorage.setItem("tipo-cotizacion", cotizacion);
    document.querySelector(".selected").classList.remove("selected");
    input_button.classList.add("selected");
    document.querySelector("#cotizacionSeleccionada").textContent = texto;
  };
  return input_button;
}
return {set,cambio_cotizacion};
}});

define({id: "9cf6dfe6", mode: "inline", inputs: ["tradeTypes","display"], body: async (tradeTypes,display) => {
display(await(
tradeTypes
))
}});

define({id: "845d4acb", mode: "inline", inputs: ["plotHeader","display"], body: async (plotHeader,display) => {
display(await(
plotHeader
))
}});

define({id: "6c4ada2c", mode: "inline", inputs: ["timeRanges","display"], body: async (timeRanges,display) => {
display(await(
timeRanges
))
}});

define({id: "0f3850ab", mode: "inline", inputs: ["plot","display"], body: async (plot,display) => {
display(await(
plot
))
}});

define({id: "db14ec10", mode: "inline", inputs: ["texto_cotizaciones","selected_cotizacion","display"], body: async (texto_cotizaciones,selected_cotizacion,display) => {
display(await(
texto_cotizaciones(selected_cotizacion)
))
}});

define({id: "02aa75dd", mode: "inline", inputs: ["bolivianosInput","display"], body: async (bolivianosInput,display) => {
display(await(
bolivianosInput
))
}});

define({id: "03429bbe", mode: "inline", inputs: ["bolivianos","d3","selected","tipo_cotizacion","display"], body: async (bolivianos,d3,selected,tipo_cotizacion,display) => {
display(await(
 bolivianos ? d3.format(".2f")(bolivianos / selected[tipo_cotizacion]) : "し" 
))
}});

define({id: "816b3e29", mode: "inline", inputs: ["bolivianos","d3","officialRates","tradeType","display"], body: async (bolivianos,d3,officialRates,tradeType,display) => {
display(await(
bolivianos ? d3.format(".2f")(bolivianos / officialRates[tradeType]) : "し" 
))
}});

define({id: "908537ca", mode: "inline", inputs: ["d3","officialRates","tradeType","selected","tipo_cotizacion","display"], body: async (d3,officialRates,tradeType,selected,tipo_cotizacion,display) => {
display(await(
(d3.format(".2%")(1 - (officialRates[tradeType] / selected[tipo_cotizacion])))
))
}});

define({id: "81b20b57", mode: "inline", inputs: ["selected","tipo_cotizacion","display"], body: async (selected,tipo_cotizacion,display) => {
display(await(
selected[tipo_cotizacion]
))
}});

define({id: "daaa1762", mode: "inline", inputs: ["cambio_cotizacion","display"], body: async (cambio_cotizacion,display) => {
display(await(
cambio_cotizacion("median")
))
}});

define({id: "f6967881", mode: "inline", inputs: ["selected","display"], body: async (selected,display) => {
display(await(
selected.median
))
}});

define({id: "61e0de14", mode: "inline", inputs: ["cambio_cotizacion","display"], body: async (cambio_cotizacion,display) => {
display(await(
cambio_cotizacion("vwap")
))
}});

define({id: "adb395cc", mode: "inline", inputs: ["selected","display"], body: async (selected,display) => {
display(await(
selected.vwap ? "y equivale a Bs. " + selected.vwap : ""
))
}});

define({id: "ce7c2cb0", mode: "inline", inputs: ["cambio_cotizacion","display"], body: async (cambio_cotizacion,display) => {
display(await(
cambio_cotizacion("naive")
))
}});

define({id: "05c0d78b", mode: "inline", inputs: ["selected","display"], body: async (selected,display) => {
display(await(
selected.naive ? "y equivale a Bs. " + selected.naive : ""
))
}});

</script>
<div id="observablehq-center">
<main id="observablehq-main" class="observablehq">
<link rel="stylesheet" href="./_file/style.7dc18801.css">
<div class="observablehq observablehq--block"><!--:0e160895:--></div>
<div class="observablehq observablehq--block"><!--:d80fe801:--></div>
<div class="observablehq observablehq--block"><!--:ef4e770f:--></div>
<div class="observablehq observablehq--block"><!--:4f0781b7:--></div>
<div class="observablehq observablehq--block"><!--:372b552c:--></div>
<div class="observablehq observablehq--block"><!--:b0ab47b8:--></div>
<div class="observablehq observablehq--block"><!--:4bf85c01:--></div>
<div class="observablehq observablehq--block"><!--:eecc0d5c:--></div>
<div class="observablehq observablehq--block"><!--:77b3e1c9:--></div>
<div class="observablehq observablehq--block"><!--:492db887:--></div>
<div class="observablehq observablehq--block"><!--:6842829b:--></div>
<div class="observablehq observablehq--block"><!--:d81136b0:--></div>
<div id="titulo">D贸lar en Bolivia</div>
<div id="opcionesCompraVenta">
    <observablehq-loading></observablehq-loading><!--:9cf6dfe6:-->
</div>
<div id="precioValor">
    <observablehq-loading></observablehq-loading><!--:845d4acb:-->
</div>
<div id="grafico" class="card">
    <div id="opcionesTiempo">
        <observablehq-loading></observablehq-loading><!--:6c4ada2c:-->
    </div>
    <observablehq-loading></observablehq-loading><!--:0f3850ab:-->
    <div id="graficoNota">
        <div id="cotizacionSeleccionada">
            <observablehq-loading></observablehq-loading><!--:db14ec10:-->
        </div>
    </div>
</div>
<div id="devaluacion">
    <div>
        Bs. <observablehq-loading></observablehq-loading><!--:02aa75dd:-->
        <span> equivalen a </span>
        <span class="underlined"><observablehq-loading></observablehq-loading><!--:03429bbe:--> D贸lares</span>,
    </div>
    <div>
        <span>que al tipo de cambio oficial ser铆an</span>
        <span class="underlined"><observablehq-loading></observablehq-loading><!--:816b3e29:--> D贸lares</span>.
    </div>
    <div>
        <span>Una devaluaci贸n del </span>
        <span class="underlined"><observablehq-loading></observablehq-loading><!--:908537ca:--></span>.
    </div>
</div>
<div id="explicacion">
    <details>
        <summary>驴De d贸nde salen estos n煤meros?</summary>
        <div class="content">
<p><a href="https://p2p.binance.com/en/trade/all-payments/USDT?fiat=BOB" target="_blank" rel="noopener noreferrer">Binance P2P</a> es un mercado en internet donde la gente puede comprar y vender USDT, una criptomoneda cuya cotizaci贸n simula el valor del d贸lar americano. El valor de USDT tiende a subir y bajar junto al valor del d贸lar en la calle. Cuando alguien quiere vender USDT por bolivianos, ingresa a Binance P2P y publica una oferta, que consiste en una cotizaci贸n y un monto. Binance P2P lista docenas de ofertas todo el tiempo.</p>
<p>Sin embargo, este listado no incluye una cotizaci贸n estimada de mercado o informaci贸n de qu茅 ofertas se toman efectivamente. Es s贸lo una lista de ofertas. Entonces 驴de d贸nde sale que 1 D贸lar equivale a <observablehq-loading></observablehq-loading><!--:81b20b57:--> Bolivianos? 驴C贸mo consolidar la informaci贸n de este listado en un s贸lo valor referencial?</p>
<p>Ofrezco 3 opciones:</p>
<p>La <observablehq-loading></observablehq-loading><!--:daaa1762:-->, que es una idea simple e intuitiva de la tendencia central en el mercado y equivale a Bs. <observablehq-loading></observablehq-loading><!--:f6967881:-->.</p>
<p>El <observablehq-loading></observablehq-loading><!--:61e0de14:-->, que ser铆a una estimaci贸n m谩s correcta de la tendencia central ponderando cada precio listado por el monto que se ofrece. Es el precio que muestro por defecto <observablehq-loading></observablehq-loading><!--:adb395cc:-->.</p>
<p>Estas opciones son aproximaciones de la tendencia central en el mercado. Pero alguien que quiera comprar o vender d贸lares probablemente busca valores m谩s extremos. La tercera opci贸n es el <observablehq-loading></observablehq-loading><!--:ce7c2cb0:-->. Este valor representa la cotizaci贸n de una oferta que se tomar铆a f谩cilmente en el mercado <observablehq-loading></observablehq-loading><!--:05c0d78b:-->.</p>
<p>Finalmente, el 1 de diciembre de 2025 el Banco Central de Bolivia <a href="https://www.bcb.gob.bo/webdocs/files_noticias/COMUNICADO%20DE%20PRENSA%20BCB_DIC_ok.pdf" target="_blank" rel="noopener noreferrer">comenz贸 a publicar</a> el <em>valor referencial del d贸lar estadounidense</em> para compra y venta. El valor de compra representa el promedio ponderado del tipo de cambio en operaciones entre entidades de intermediaci贸n financiera y sus clientes mayoristas. Y el valor de venta es el tipo de cambio m谩ximo que estas entidades cobran en operaciones con el exterior. Estos valores se deber铆an publicar diariamente en la p谩gina del Banco Central.</p>
<p>Puedes utilizar todos estos datos como quieras desde <a href="https://github.com/mauforonda/dolares/" target="_blank" rel="noopener noreferrer">el repositorio</a>, que se actualiza cada 30 minutos, m谩s o menos.</p>
<p>Por favor s贸lo utiliza estos n煤meros como una referencia.</p>
</div>
</details></div><div class="center"></div>
<div id="creditos">
    <div class="credito">
        <span><a href="https://p2p.binance.com/en/trade/all-payments/USDT?fiat=BOB" target="_blank" rel="noopener noreferrer">Binance P2P</a> + <a href="https://www.bcb.gob.bo/" target="_blank" rel="noopener noreferrer">BCB</a></span>
        <span class="creditoNota">fuentes</span>
    </div>
    <div>&amp;</div>
    <div class="credito">
        <span><a href="https://mauforonda.github.io" target="_blank" rel="noopener noreferrer">Mauricio Foronda</a></span>
        <span class="creditoNota">creaci贸n</span>
    </div>
</div>
</main>
</div>
